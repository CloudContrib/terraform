# Starter pipeline
# Doc memo : https://docs.microsoft.com/en-us/azure/devops/pipelines/yaml-schema?view=azure-devops&tabs=schema&viewFallbackFrom=vsts
# GitHub service connection : https://docs.microsoft.com/en-us/azure/devops/pipelines/library/service-endpoints?view=azure-devops#sep-github

name: $(BuildDefinitionName).$(DayOfYear)$(Rev:.r)

variables:
- group: terraform_binary  # variable group
- name: backend_secret_file_id1234
  value: 'bp1_backend.tfvars'
- name: main_secret_file_id12
  value: 'bp1_main.tfvars'
- name: main_secret_file_id34
  value: 'bp3_main.tfvars'

resources:
  repositories:
    - repository: terraform # identifier (A-Z, a-z, 0-9, and underscore)
      type: github
      endpoint: JamesDLD  # name of the service connection to use (for non-Azure Repos types)
      name: JamesDLD/terraform
      
pool:
  vmImage: 'Ubuntu-16.04'